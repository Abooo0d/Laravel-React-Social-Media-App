import{a as M,e as q,j as e,L as ae,c as oe,d as le,r as o,n as ie,k as ne,H as de}from"./app-D8ApISFC.js";import{T as n,C as p,P as ce,a as me}from"./ProfileImageFullView-De1VP6w1.js";import{H as L,t as D,U as ge,A as xe}from"./AuthenticatedLayout-BWu7Fzt5.js";import{C as H}from"./index-el7WdzCH.js";import{P as pe}from"./PostContainer-D8q7m-N2.js";import{C as ue}from"./CreatePost-DvA7n26I.js";import fe from"./Edit-DGfm3Mit.js";import"./switch-CeXg4hJT.js";import"./keyboard-COk9tFWf.js";import"./use-sync-refs-B2uBAqz-.js";import"./use-is-mounted-xw8GnmYY.js";import"./focus-management-BKLh0YBZ.js";import"./Buttons-D6eagE2q.js";import"./index-CmLoXGn-.js";import"./Spinner-WIpfGoCI.js";import"./TextInput-4JU2n0Cb.js";import"./PostCard-CKV49jer.js";import"./index-DyLTNINC.js";import"./DeleteUserForm-Cr2e--8C.js";import"./DangerButton-Cnts6QC_.js";import"./InputError-CzfgxtsL.js";import"./InputLabel-wOHSHXGm.js";import"./transition-K5RuaDx9.js";import"./UpdatePasswordForm-EwVFhwIs.js";import"./UpdateProfileInformationForm-CzvBep5P.js";const he=({request:r})=>{const{setSuccessMessage:N,setErrors:w}=M(),{data:m,post:h}=q({request_id:r.request_id,request_owner_id:r.friend_id}),l=()=>{h(route("user.acceptRequest"),m,{onSuccess:()=>{},onError:()=>{}})};return e.jsxs("div",{className:"group relative bg-gray-700/30 backdrop-blur-sm rounded-[8px] border-[1px] border-solid border-gray-500/50  flex flex-col justify-between items-center cursor-pointer duration-200 hover:bg-gray-600/50 hover:border-gray-500 overflow-hidden drop-shadow-2xl",children:[e.jsx("img",{src:r.avatar_url||"/images/default_avatar_image.png",alt:"",className:"absolute top-[20%] left-[10%] w-[90px] max-h-[90px] h-full object-cover rounded-full border-[1px] border-solid border-gray-500/50"}),e.jsx("img",{src:r.cover_url||"/images/default_cover_image.png",alt:"",className:"w-full h-[80%] max-h-[150px] object-cover "}),e.jsxs("div",{className:"flex justify-between items-center w-full pr-4",children:[e.jsxs(ae,{className:"flex flex-col justify-start items-start w-full",href:route("profile.view",r.name),children:[e.jsx("h3",{className:"text-gray-300 font-bold mt-1 w-full text-left px-4",children:r.username}),e.jsx("h3",{className:"text-gray-400 mb-2 w-full text-left px-4 text-[13px] -mt-1",children:r.email})]}),e.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[e.jsx("button",{className:"py-[5px] px-[5px] bg-emerald-500/40 hover:bg-emerald-600/90 border-[1px] border-solid border-emerald-400 text-gray-300 rounded-md text-[12px] duration-200 ",onClick:()=>l(),children:"Accept"}),e.jsx("button",{className:"py-[5px] px-[5px] bg-red-600/40 hover:bg-red-600/70 border-[1px] border-solid border-red-400 text-gray-300 rounded-md text-[12px] duration-200 ",onClick:()=>{},children:"Decline"})]})]})]})},ye=({auth:r,mustVerifyEmail:N,status:w,photos:m})=>{var E,R,U,W;const{setUser:h,user:l}=oe(r==null?void 0:r.user),{flash:i,errors:y}=le().props,{setErrors:c,setSuccessMessage:z}=M(),{setData:u,post:C}=q({coverImage:null,avatarImage:null}),[I,P]=o.useState([]),[V,_]=o.useState(""),[G,S]=o.useState(""),[Y,b]=o.useState(!1),[O,v]=o.useState(!1),[X,k]=o.useState(0),[B,A]=o.useState(!1),[J,j]=o.useState(!1),[K,T]=o.useState(""),[Q,F]=o.useState("cover"),{data:d,refetch:f,isLoading:be}=ie(r.user.id);o.useEffect(()=>{let s=[];Object.keys(y).map(t=>s.push(y[t])),c(s)},[y]),o.useEffect(()=>{i!=null&&i.success&&z(i.success),i!=null&&i.error&&c([i.error])},[i]),o.useEffect(()=>{r!=null&&r.user?h(r==null?void 0:r.user):ne.get(route("login"))},[r]),o.useEffect(()=>{P(d==null?void 0:d.posts)},[d]);const Z=s=>{try{const t=s.target.files[0];if(t){u("avatarImage",s.target.files[0]),v(!0);const a=new FileReader;a.onload=()=>{S(a.result)},a.readAsDataURL(t)}}catch(t){console.log(t)}},$=()=>{S(""),v(!1),u({avatarImage:null})},ee=()=>{var s,t;try{C(route("profile.changeImages"),{onSuccess:()=>{f()},onError:a=>{var g,x;c([((x=(g=a==null?void 0:a.response)==null?void 0:g.data)==null?void 0:x.message)||"Some Thing Went Wrong"])},preserveScroll:!0}),v(!1)}catch(a){c([((t=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:t.message)||"Some Thing Went Wrong"])}},re=s=>{try{const t=s.target.files[0];if(t){u("coverImage",s.target.files[0]),b(!0);const a=new FileReader;a.onload=()=>{_(a.result)},a.readAsDataURL(t)}}catch(t){console.log(t)}},se=()=>{_(""),u({coverImage:null}),b(!1)},te=()=>{var s,t;try{C(route("profile.changeImages"),{onSuccess:()=>{f()},onError:a=>{var g,x;c([((x=(g=a==null?void 0:a.response)==null?void 0:g.data)==null?void 0:x.message)||"Some Thing Went Wrong"])},preserveScroll:!0}),b(!1)}catch(a){c([((t=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:t.message)||"Some Thing Went Wrong"])}};return e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx("title",{children:"Chatter"}),e.jsx("link",{rel:"icon",type:"image/svg+xml",href:"/Logo_ico.ico"})]}),e.jsxs("div",{className:"container mx-auto ",children:[e.jsxs("div",{className:"max-h-[350px] w-full relative",children:[e.jsxs("div",{className:"relative max-h-[350px] w-full group",children:[e.jsx("img",{src:V||l.cover_url||"/images/default_cover_image.jpg",alt:"cover Image",className:"h-[300px] w-full object-cover cursor-pointer",onClick:()=>{T(l.cover_url),j(!0),F("cover")}}),Y?e.jsxs("div",{className:"absolute top-2 right-2  flex justify-center items-center gap-2 group-hover:opacity-100 opacity-0 duration-300",children:[e.jsxs("button",{onClick:se,className:"rounded-md py-1 px-4 bg-gray-800/80 hover:bg-gray-800 duration-300 text-gray-200 flex gap-2 justify-center items-center",children:[e.jsx(L,{}),"Cancel"]}),e.jsxs("button",{onClick:te,className:"rounded-md py-1 px-4 bg-gray-50/80 hover:bg-gray-50 duration-300 text-gray-800 flex gap-2 justify-center items-center",children:[e.jsx(D,{}),"Submit"]})]}):e.jsxs("button",{className:"group-hover:opacity-100 opacity-0 rounded-md absolute top-2 right-2 py-1 px-4 bg-gray-50/80 hover:bg-gray-50 duration-300 text-gray-800 flex gap-2 justify-center items-center",children:[e.jsx(H,{className:"text-gray-800 w-[20px] h-[20px]"}),"Change Cover Image",e.jsx("input",{type:"file",name:"cover_image",className:"absolute top-0 left-0 bottom-0 right-0 opacity-0 cursor-pointer",onChange:s=>{re(s)}})]})]}),e.jsxs("div",{className:"absolute lg:w-[200px] lg:h-[200px] md:w-[160px] md:h-[160px] w-[130px] h-[130px] md:-bottom-[50px] md:left-20 left-4 -bottom-[80px] group",children:[e.jsx("img",{src:G||l.avatar_url||"/images/default_avatar_image.png",alt:"AvatarImage",className:" rounded-full w-full h-full object-cover cursor-pointer",onClick:()=>{T(l.avatar_url),F("avatar"),j(!0)}}),e.jsx("div",{className:"absolute rounded-full bg-black/50 backdrop-blur-[3px] top-[50%] left-[50%] translate-y-[-50%] translate-x-[-50%] duration-300 group-hover:opacity-100 opacity-0 flex justify-center items-center",children:O?e.jsxs("div",{className:"  flex justify-center items-center gap-2 group-hover:opacity-100 opacity-0 duration-300",children:[e.jsx("button",{onClick:$,className:"cursor-pointer z-10 overflow-hidden rounded-md relative py-2 px-2 bg-gray-800/80 hover:bg-gray-800 text-gray-200 duration-300  flex gap-2 justify-center items-center",children:e.jsx(L,{})}),e.jsx("button",{onClick:ee,className:"cursor-pointer z-10 overflow-hidden rounded-md relative py-2 px-2 bg-gray-50/80 hover:bg-gray-50 duration-300 text-gray-800 flex gap-2 justify-center items-center",children:e.jsx(D,{})})]}):e.jsxs("button",{className:"cursor-pointer z-10 overflow-hidden rounded-md relative py-2 px-2 bg-gray-50/80 hover:bg-gray-50 duration-300 text-gray-800 flex gap-2 justify-center items-center",children:[e.jsx(H,{className:"text-gray-800 w-[30px] h-[30px] cursor-pointer"}),e.jsx("input",{type:"file",name:"cover_image",className:"absolute top-0 left-0 bottom-0 right-0 opacity-0 cursor-pointer",onChange:s=>{Z(s)}})]})})]})]}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start gap-1 sm:gap-0 bg-gray-900 py-4 lg:pl-[300px] md:pl-[250px] pl-[160px]",children:[e.jsxs("div",{className:"flex gap-2 justify-center items-start flex-col lg:flex-row max-sm:gap-0",children:[e.jsx("h2",{className:"text-gray-300 sm:text-lg text-[16px] mb-0",children:l.name}),e.jsx("p",{className:" text-gray-500 sm:text-lg text-[16px]",children:l.email})]}),e.jsxs("h2",{className:"text-gray-500 mb-0 sm:text-lg text-[16px]",children:["@",l.username]})]}),e.jsx("div",{className:"w-full h-full max-sm:pb-[55px] ",children:e.jsxs(n.Group,{children:[e.jsxs(n.List,{className:"md:px-[40px] px-[20px] flex p-1 gap-5 dark:bg-gray-900 bg-gray-100 rounded-b-md border-t-solid border-t-gray-700 border-t-[1px]",children:[e.jsx(p,{text:"Posts"}),e.jsx(p,{text:"Photos"}),e.jsx(p,{text:"Friends"}),e.jsx(p,{text:"requests"}),e.jsx(p,{text:"About"})]}),e.jsxs(n.Panels,{className:"rounded-md",children:[e.jsx(n.Panel,{className:"rounded-md flex flex-col gap-1 w-full",children:e.jsx("div",{className:" dark:bg-homeFeed rounded-md",children:e.jsx(pe,{posts:I,refetch:f,AllPostsData:(E=d==null?void 0:d.posts)==null?void 0:E.data,children:e.jsx(ue,{user:l,setPosts:P,posts:I,classes:"px-3 py-3 bg-homeFeed ",refetch:f})})})}),e.jsx(n.Panel,{className:"rounded-md flex flex-col gap-1 w-full mt-4",children:e.jsxs("div",{className:"relative rounded-md mb-2 bg-gray-900 duration-200 flex flex-row gap-4 flex-wrap p-4",children:[m.length>0?m.map((s,t)=>e.jsx("img",{src:s.url,alt:"",className:"object-cover flex-1 min-w-[250px] max-h-[150px] rounded-md cursor-pointer border-gray-700/20 border-[1px] border-solid hover:border-gray-700 duration-200",onClick:()=>{k(t),A(!0)}},t)):e.jsx("div",{className:"relative rounded-md p-3 bg-gray-900 duration-200 w-full text-center text-gray-400 cursor-default",children:"There Is No Photos"}),e.jsx(ce,{photos:m,setShowImage:A,showImage:B,setImageIndex:k,imageIndex:X})]})}),e.jsx(n.Panel,{className:"rounded-md flex flex-col gap-1 w-full mt-4",children:r.user.friends.length>0?e.jsx("div",{className:"relative rounded-md p-3 mb-2 dark:bg-gray-900 bg-gray-100 duration-200 grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 gap-2",children:(R=r.user.friends)==null?void 0:R.map((s,t)=>e.jsx(ge,{user:s},t))}):e.jsx("div",{className:"w-full text-center text-gray-500 py-8 dark:bg-gray-900 rounded-md",children:"You Don`t Have Any Friends Yet."})}),e.jsx(n.Panel,{className:"rounded-md flex flex-col gap-1 w-full mt-4",children:((U=r.user)==null?void 0:U.pending_requests.length)>0?e.jsx("div",{className:"relative rounded-md p-3 mb-2 dark:bg-gray-900 bg-gray-100 duration-200 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-2",children:(W=r.user.pending_requests)==null?void 0:W.map((s,t)=>e.jsx(he,{request:s},t))}):e.jsx("div",{className:"w-full text-center text-gray-500 py-8 dark:bg-gray-900 rounded-md",children:"There Is No Pending Requests"})}),e.jsx(n.Panel,{className:"rounded-md flex flex-col gap-1 w-full mt-4",children:e.jsx(fe,{mustVerifyEmail:N,status:w})})]})]})}),e.jsx(me,{show:J,setShowImage:j,image:K,downloadUrl:route("download.userImage",{user:r.user.id,type:Q})})]})]})};ye.layout=r=>e.jsx(xe,{children:r});export{ye as default};
