import{r as o,j as s,c as g,a as u,m as p,d as f,k as j,H as P}from"./app-D8ApISFC.js";import{C as v}from"./CreatePost-DvA7n26I.js";import{P as y}from"./PostContainer-D8q7m-N2.js";import{A as E}from"./AuthenticatedLayout-BWu7Fzt5.js";import"./PostCard-CKV49jer.js";import"./index-el7WdzCH.js";import"./index-CmLoXGn-.js";import"./Buttons-D6eagE2q.js";import"./Spinner-WIpfGoCI.js";import"./index-DyLTNINC.js";import"./TextInput-4JU2n0Cb.js";import"./switch-CeXg4hJT.js";import"./keyboard-COk9tFWf.js";import"./use-sync-refs-B2uBAqz-.js";const b=({posts:r,loading:n,refetch:t})=>{var a;const[i,m]=o.useState(r==null?void 0:r.posts);return o.useEffect(()=>{m(r==null?void 0:r.posts)},[r]),s.jsx("div",{className:"order-2 bg-gray-300 dark:bg-homeFeed lg:min-h-full min-h-[500px] max-h-barHeight flex-1 overflow-scroll",children:s.jsx(y,{posts:i,AllPostsData:(a=r==null?void 0:r.posts)==null?void 0:a.data,classes:"px-4",isLoading:n,refetch:t,children:s.jsx(v,{classes:"px-3 py-3 bg-gray-900",refetch:t,groupId:""})})})},h=({auth:r})=>{const{setUser:n}=g(),{setSuccessMessage:t,setErrors:i}=u(),{data:m,refetch:a,isLoading:d}=p(),{flash:e,errors:c}=f().props;return o.useEffect(()=>{e!=null&&e.success&&t(e.success),e!=null&&e.error&&i([e.error])},[e]),o.useEffect(()=>{r!=null&&r.user?n(r.user):j.get(route("login"))},[r]),o.useEffect(()=>{if(c||e!=null&&e.error){let l=[];Object.keys(c).map(x=>l.push(c[x])),e!=null&&e.error&&i([e.error,...l])}},[c,e==null?void 0:e.error]),s.jsxs(s.Fragment,{children:[s.jsxs(P,{children:[s.jsx("title",{children:"Chatter"}),s.jsx("link",{rel:"icon",type:"image/svg+xml",href:"/Logo_ico.ico"})]}),s.jsx("div",{className:"flex min-h-[calc(100vh-66px)] max-h-[calc(100vh-66px)] overflow-hidden bg-gray-900",children:s.jsx(b,{loading:d,posts:m,refetch:a})})]})};h.layout=r=>s.jsx(E,{children:r});export{h as default};
