import{r as o,j as s,c as p,a as f,m as j,n as h,d as P,k as v,H as E}from"./app-DIx6L9fD.js";import{C as y}from"./CreatePost-C1N2x6q6.js";import{P as C}from"./PostContainer-B-79cLaV.js";import{A as S}from"./AuthenticatedLayout-C5_OH66V.js";import"./PostCard-DMthNg9j.js";import"./index-DQrQpBHy.js";import"./index-DWQzrZRX.js";import"./Buttons-BYWrEsx6.js";import"./Spinner-BOWdsVQC.js";import"./index-fp-23wq_.js";import"./TextInput-Crbl9h7V.js";import"./switch-CgLgNccR.js";import"./keyboard-BAEadPMF.js";import"./use-sync-refs-kPhRhEwf.js";const b=({posts:r,loading:c,refetch:t,suggestions:i,isLoadingSuggestions:m})=>{var a;const[g,d]=o.useState(r==null?void 0:r.posts);return o.useEffect(()=>{d(r==null?void 0:r.posts)},[r]),s.jsx("div",{className:"order-2 bg-gray-300 dark:bg-homeFeed lg:min-h-full min-h-[500px] max-h-barHeight flex-1 overflow-scroll",children:s.jsx(C,{posts:g,AllPostsData:(a=r==null?void 0:r.posts)==null?void 0:a.data,classes:"px-2 md:px-4 ",isLoading:c,refetch:t,suggestions:i,showSuggestions:!0,isLoadingSuggestions:m,children:s.jsx(y,{classes:"px-3 py-3",refetch:t,groupId:""})})})},H=({auth:r})=>{const{setUser:c}=p(),{setSuccessMessage:t,setErrors:i}=f(),{data:m,refetch:g,isLoading:d}=j(),{data:a,isLoading:u,refetch:L}=h(),{flash:e,errors:n}=P().props;return o.useEffect(()=>{e!=null&&e.success&&t(e.success),e!=null&&e.error&&i([e.error])},[e]),o.useEffect(()=>{r!=null&&r.user?c(r.user):v.get(route("login"))},[r]),o.useEffect(()=>{if(n||e!=null&&e.error){let l=[];Object.keys(n).map(x=>l.push(n[x])),e!=null&&e.error&&i([e.error,...l])}},[n,e==null?void 0:e.error]),s.jsxs(s.Fragment,{children:[s.jsxs(E,{children:[s.jsx("title",{children:"Chatter"}),s.jsx("link",{rel:"icon",type:"image/svg+xml",href:"/Logo_ico.ico"})]}),s.jsx("div",{className:"flex min-h-[calc(100vh-66px)] max-h-[calc(100vh-66px)] overflow-hidden bg-gray-900",children:s.jsx(b,{loading:d,posts:m,refetch:g,suggestions:a,isLoadingSuggestions:u})})]})};H.layout=r=>s.jsx(S,{children:r});export{H as default};
